# FocusMeter — трекинг фокуса за компьютером

### Список обновлений (версия 0.2b)
### 1. Интерфейс и темы

- Добавлена тёмная тема Fusion и сделана темой по умолчанию.

- Реализован выбор темы интерфейса:
   тёмная (Fusion),
   светлая (Fusion),
   системная (классическая).

- Обновлён внешний вид элементов через QSS:

- скруглённые кнопки с hover-состояниями,

- более аккуратные поля ввода и спинбоксы,

- доработанные скроллбары,

- визуально выделенные группы настроек.

## Перестроен основной интерфейс:

- лог вынесен в широкий блок справа, чтобы удобно просматривать историю работы трекера;

- блок статистики расположен слева, лог — справа, с приоритетом по ширине;

- увеличен размер основного окна по умолчанию.

## Поля «Рабочие приложения» и «Отвлекающие приложения»:

- увеличена высота (видно сразу несколько строк),

- удобнее вводить списки процессов, при большом количестве строк корректно работает прокрутка.

### 2. Пресеты режимов работы

- Добавлены готовые пресеты режимов работы/отдыха:
   Помодоро 25/5 (25 минут работы, 5 минут перерыв) — используется по умолчанию,
   52/17,
   50/10,
   «Пользовательский» — ручная настройка всех интервалов.

- При выборе пресета автоматически подставляются рекомендуемые значения:
   интервал опроса,
   порог бездействия,
   время до напоминания о бездействии,
   время до напоминания о перерыве.

- При загрузке настроек приложение пытается сопоставить текущие значения одному из пресетов; если совпадения нет, параметры автоматически приводятся к помодоро-профилю (25/5) как стандартному.

### 3. Логика трекинга и уведомлений

- Доработан алгоритм подсчёта «усталости»:
   напоминания о перерыве ориентируются на реальное рабочее время в рабочих приложениях;
   короткие перерывы снижают усталость частично, а не полностью — если отдохнуть «для галочки» и сразу вернуться к работе, следующее напоминание придёт раньше.
  
- Улучшён учёт бездействия и отвлечений:
   время до напоминания о бездействии теперь считается от момента последнего ввода, а не «порог + ещё столько же»;
   для отвлекающих приложений учитывается непрерывный интервал нахождения в таких окнах;
   уведомление о бездействии/отвлечении приходит более предсказуемо и соответствует заданным настройкам.

- Сохранены гибкие настройки:
   порог инпута (idle threshold),
   интервал опроса,
   напоминания о необходимости перерыва,
   уведомления о бездействии/отвлечении (можно включать/отключать отдельно).

### 4. Статистика и база данных

- Реализовано отдельное окно подробной статистики:
   выбор даты;
   сводка за день (общее время под наблюдением, активное время, рабочее/отвлекающее, idle);
   распределение по приложениям с указанием типа (рабочее, отвлекающее, прочее, смешанное).

- При остановке трекера окно статистики за сегодняшний день открывается автоматически, чтобы не нужно было нажимать дополнительные кнопки.

- Исправлено расположение базы данных:
   при запуске из исходников база focusmeter.db и config.json лежат в папке проекта;
   при запуске из собранного .exe они создаются рядом с .exe, а не во временной директории.

Благодаря этому статистика и настройки сохраняются между запусками в релизной версии.


--------------------------------------------------------------------------------------------------

### FocusMeter — небольшое десктоп-приложение для Windows, которое помогает отслеживать, сколько времени вы действительно работаете за компьютером, а сколько — отвлекаетесь или просто бездействуете.

## Приложение:

- следит за активным окном (какая программа сейчас перед глазами);

- отслеживает факт активности (есть ли движение мыши / нажатия на клавиатуре);

- присылает уведомления, если вы слишком долго бездействуете или, наоборот, слишком долго работаете без перерыва;

- ведёт статистику за день: рабочее время, отвлекающее, бездействие, топ приложений.

## Текст, который вы печатаете, и содержание экранов не записываются — фиксируется только факт ввода и имена процессов/окон.

### Как установить и запустить

Скачайте архив с релизом (например, FocusMeter-v0.2b-win.zip).
Распакуйте его в любую папку (желательно без кириллицы и пробелов в пути, например C:\Apps\FocusMeter).
Запустите файл FocusMeter.exe.

При первом запуске рядом с программой автоматически создадутся:
config.json — файл настроек;
focusmeter.db — база данных со статистикой.

### Настройки: что означают поля

## Интервал опроса (сек)
Как часто программа делает «снимок состояния» (по умолчанию 1 секунда).

Каждые N секунд FocusMeter:
- смотрит, какое окно активно;
- проверяет, была ли активность мыши/клавиатуры;
- записывает это в базу.

Обычно 1 секунда — оптимально. Если хотите меньше нагрузки — можно поставить 2–3.

## Порог бездействия (сек)
Через сколько секунд без ввода (без движений мыши и клавиатуры) считать, что вы перестали быть активными.

Пример:
если указано 5 секунд, то:
пока вы двигаете мышь/печатаете хотя бы раз в 5 секунд — вы считаетесь активным;
если вы перестали что-то делать, то на 6-й секунде и дальше вы считаетесь в состоянии бездействия (idle), даже если окно программы всё ещё открыто.

Этот параметр влияет на:
- то, как время считается в статистике (активное / бездействие);
- запуск внутреннего таймера напоминания о бездействии (см. следующий пункт).

## Напоминать о бездействии (мин)
Через сколько времени непрерывного бездействия показывать уведомление.

Важно, как именно это работает:

Сначала считается время с момента последнего ввода (idle_seconds) или время активности "отвлекающего" окна.
Как только idle_seconds превышает Порог бездействия (сек), вы считаетесь «idle».
Дальше идёт отсчёт времени бездействия до напоминания.
Если здесь указано 0 минут — уведомление придёт сразу после превышения порога по вводу.

Например:
Порог бездействия = 5 секунд,
Напоминать о бездействии = 0 минут,
→ уведомление появится примерно через 5–6 секунд отсутствия движений мыши/клавиатуры.

Если указано, например, 10 минут, то логика такая:
после 5 секунд (порог бездействия) вы уже считаетеcь idle,
но уведомление придёт только когда суммарное время бездействия достигнет 10 минут.
Повторные уведомления о бездействии приходят не чаще, чем раз в этот же интервал.

Флажок «Уведомлять о бездействии» позволяет вообще включать/выключать этот тип напоминаний.

## Напоминать о перерыве (мин)
Сколько минут непрерывной работы в рабочих приложениях должно пройти, чтобы программа напомнила, что пора сделать перерыв.

Как это работает:
Пока вы:
активно двигаете мышью/печатаете (не превышен порог бездействия), и окно относится к рабочим приложениям, программа увеличивает внутренний счётчик «непрерывной работы».

Как только вы:
перестаёте вводить (idle), или переключаетесь в отвлекающее/другое приложение, этот счётчик сбрасывается.

Если счётчик достигает указанного времени (например, 50 минут), появляется уведомление «Пора сделать перерыв».

Флажок «Уведомлять о необходимости перерыва» включает/выключает эти напоминания.

## Рабочие приложения
Поле «Рабочие приложения» — список имён процессов, которые вы считаете рабочими.

Одно имя процесса на строку, например:
pycharm64.exe
code.exe
excel.exe

Где взять имя процесса:
Откройте «Диспетчер задач» → вкладка «Подробности» → колонка «Имя».
Скопируйте имя нужной программы (например, pycharm64.exe) и вставьте в список.
Вся активность с вводом в этих процессах будет относиться к рабочему времени.

## Отвлекающие приложения
Поле «Отвлекающие приложения» — точно так же, но для приложений, которые хочется контролировать как «отвлечения».

Например:
chrome.exe (если часто уходите в соцсети);
discord.exe;
telegram.exe.

В статистике они будут считаться как отвлекающее активное время.

### Закрытие приложения

Чтобы корректно остановить трекинг, нажмите кнопку «Остановить».
При закрытии окна, если трекер ещё работает, программа предложит его сначала остановить.
Все данные (config.json и focusmeter.db) остаются в папке с программой — при следующем запуске настройки и история сохранятся.
